@model Foodilizer_Group35.Models.Restaurant
@{
    ViewData["Title"] = "Gold Home Page";
    Layout = "~/Views/Shared/_gold_store_layout.cshtml";
}

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
<link rel="stylesheet" href="~/css/store_front/gold_home.css">
<link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/sweetalert2@10.10.1/dist/sweetalert2.min.css'>
<link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous" />

@section scripts
{
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script type="text/javascript" src="https://code.jquery.com/jquery-1.12.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10.10.1/dist/sweetalert2.all.min.js"></script>

    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
}

<div class="br_home">
    @{ List<Menu> temp = ViewBag.fooddet;}
    @{ List<Restaurant> temp2 = ViewBag.review;}
    @{ List<Restaurant> temp3 = ViewBag.rating1;}
    @{ List<Restaurant> temp4 = ViewBag.rating2;}
    @{ List<Restaurant> temp5 = ViewBag.rating3;}
    @{ List<Restaurant> temp6 = ViewBag.rating4;}
    @{ List<Food> temp7 = ViewBag.recommendation;}
    @{ Nullable<int> sessionid = ViewBag.sessionid;}
    @{ String sessionuser = ViewBag.sessionuser;}
    @{ List<RestaurantImage> temp8 = ViewBag.restimages;}
    @{ List<RestaurantImage> temp9 = ViewBag.rri1;}
    @{ List<RestaurantImage> temp10 = ViewBag.rri2;}
    @{ List<RestaurantImage> temp11 = ViewBag.rri3;}
    @{ List<RestaurantImage> temp12 = ViewBag.rri4;}
    @{ Nullable<int> count1 = ViewBag.galleryimagecount;}

    <div class="row">
        <div class="col-8">
            <div class="rest_name col-12">@Html.DisplayFor(model => model.Rname)</div>
            <div class="rest_details col-12"><i class="fa fa-location"></i>&nbsp;@Html.DisplayFor(model => model.Raddress) &nbsp;&nbsp;&nbsp;&nbsp;<i class="fa fa-phone-square-alt"></i>&nbsp;@Html.DisplayFor(model => model.OwnerContact)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i class="fa fa-hourglass-half"></i>&nbsp;@Html.DisplayFor(model => model.OpenHour)</div>
            <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
                <div class="carousel-inner">
                    @if (temp8 != null)
                    {


                        @foreach (var item in temp8)
                        {
                            if (count1 == 1)
                            {
                                <div class="carousel-item active">

                                    <img src="@Url.Content(item.GalleryImage1Path)" class="d-block w-100" alt="First slide">
                                </div>
                            }
                            else if (count1 == 2)
                            {
                                <div class="carousel-item active">
                                    <img src="@Url.Content(item.GalleryImage1Path)" class="d-block w-100" alt="First slide">
                                </div>
                                <div class="carousel-item">
                                    <img src="@Url.Content(item.GalleryImage2Path)" class="d-block w-100" alt="Second slide">
                                </div>
                            }
                            else if (count1 == 3)
                            {
                                <div class="carousel-item active">
                                    <img src="@Url.Content(item.GalleryImage1Path)" class="d-block w-100" alt="First slide">
                                </div>
                                <div class="carousel-item">
                                    <img src="@Url.Content(item.GalleryImage2Path)" class="d-block w-100" alt="Second slide">
                                </div>
                                <div class="carousel-item">
                                    <img src="@Url.Content(item.GalleryImage3Path)" class="d-block w-100" alt="Third slide">
                                </div>
                            }
                            else if (count1 == 4)
                            {
                                <div class="carousel-item active">
                                    <img src="@Url.Content(item.GalleryImage1Path)" class="d-block w-100" alt="First slide">
                                </div>
                                <div class="carousel-item">
                                    <img src="@Url.Content(item.GalleryImage2Path)" class="d-block w-100" alt="Second slide">
                                </div>
                                <div class="carousel-item">
                                    <img src="@Url.Content(item.GalleryImage3Path)" class="d-block w-100" alt="Third slide">
                                </div>
                                <div class="carousel-item">
                                    <img src="@Url.Content(item.GalleryImage4Path)" class="d-block w-100" alt="Fourth slide">
                                </div>
                            }
                            else if (count1 == 5)
                            {
                                <div class="carousel-item active">
                                    <img src="@Url.Content(item.GalleryImage1Path)" class="d-block w-100" alt="First slide">
                                </div>
                                <div class="carousel-item">
                                    <img src="@Url.Content(item.GalleryImage2Path)" class="d-block w-100" alt="Second slide">
                                </div>
                                <div class="carousel-item">
                                    <img src="@Url.Content(item.GalleryImage3Path)" class="d-block w-100" alt="Third slide">
                                </div>
                                <div class="carousel-item">
                                    <img src="@Url.Content(item.GalleryImage4Path)" class="d-block w-100" alt="Fourth slide">
                                </div>
                                <div class="carousel-item">
                                    <img src="@Url.Content(item.GalleryImage5Path)" class="d-block w-100" alt="Fifth slide">
                                </div>
                            }
                        }

                    }

                </div>
                <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="sr-only">Previous</span>
                </a>
                <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                </a>
            </div>
        </div>
        <div class="col-4">
            <div class="rounded">
                <div class="card bg-light mb-3" style="max-width: 38rem; ">
                    @if (temp8 != null)
                    {


                        @foreach (var itemx in temp8)
                        {
                            <img src="@Url.Content(itemx.BannerImagePath)" />
                        }
                    }
                        </div>
            </div>

        </div>

        <div class="best col-8 " id="menudiv">
            <div class="best_selection col-12">

                <div id="rcarouselcards" class="carousel slide" data-ride="carousel">
                    <div class="carousel-inner">
                        Recommended for you
                        <div class="swiper-container favSwiper">
                            <div class="swiper-wrapper">
                                @if (temp7 != null)
                                {
                                    @foreach (var item in temp7.Take(6))
                                    {

                                        <div class="swiper-slide">
                                            <div class="swiper-block">
                                                <div class="flipcard">
                                                    <div class="side">
                                                        <img src="@Url.Content(item.ImagePath)" class="swiper-image img-fluid w-75" alt="res-image">
                                                        <div class="swiper-card-data">
                                                            <h4 class="card-name">@item.FoodName</h4>


                                                        </div>
                                                    </div>
                                                    <div class="side back">
                                                        <div class="content">
                                                            <h5 class="ing">INGREDIENTS:</h5> <h6 class="ingitem">@item.Ingredient</h6>
                                                            <h5 class="prc">Price: Rs. @item.Price <a asp-action="addtocartgold" asp-controller="store_front" asp-route-id="@item.FoodId"> <i class="fa fa-cart-plus" aria-hidden="true"></i></a></h5>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>


                                    }
                                }

                            </div>
                            <div class="swiper-pagination"></div>
                        </div>
                    </div>
                </div>

                <div class="recommendation" id="bsdiv"></div>
                <div id="carouselcards" class="carousel slide" data-ride="carousel">
                    <div class="carousel-inner">
                        Our Best Selections
                        <div class="swiper-container favSwiper">
                            <div class="swiper-wrapper">
                                @if (temp != null)
                                {
                                    @foreach (var item in temp.First().Foods)
                                    {
                                        @if (item.Featured == "1")
                                        {
                                            <div class="swiper-slide">
                                                <div class="swiper-block">
                                                    <div class="flipcard">
                                                        <div class="side">
                                                            <img src="@Url.Content(item.ImagePath)" class="swiper-image img-fluid w-75" alt="res-image">
                                                            <div class="swiper-card-data">
                                                                <h4 class="card-name">@item.FoodName</h4>

                                                            </div>
                                                        </div>
                                                        <div class="side back">
                                                            <div class="content">
                                                                <h5 class="ing">INGREDIENTS:</h5> <h6 class="ingitem">@item.Ingredient</h6>
                                                                <h5 class="prc">Price: Rs. @item.Price <a asp-action="addtocartgold" asp-controller="store_front" asp-route-id="@item.FoodId"> <i class="fa fa-cart-plus" aria-hidden="true"></i></a></h5>


                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                        }
                                    }
                                }

                            </div>
                            <div class="swiper-pagination"></div>
                        </div>

                    </div>

                </div>

            </div>



        </div>
        <div class="col-4">

            <div class="rounded">
                <div class="card bg-light mb-3" style="max-width: 38rem; margin-top:85px">
                    @{ double c = 0.0;
                        <div class="card-header">

                            <div class="rating-topic ">Ratings and Reviews</div>
                            @if (temp2 != null)
                            {
                                double sum = 0.0;
                                double avg = 0.0;
                                int count = 0;
                                @foreach (var item in temp2.First().Reviews)
                                {

                                    var rate = @item.Rating;
                                    sum = sum + System.Convert.ToDouble(rate);
                                    count++;


                                }
                                if (count > 0)
                                {
                                    avg = (sum / count);
                                }
                                else
                                {
                                    count = 1;
                                    avg = (sum / count);
                                    count = 0;
                                }
                                float a = System.Convert.ToSingle(avg);
                                String val = a.ToString("0.0");
                                float minus = System.Convert.ToSingle(1);
                                c = avg;

                                <div class="circles">

                                    <ul style="list-style:none">

                                        <li>
                                            @val @for (int i = 0; i < System.Convert.ToInt32(a); i++)
                                            {
                                                <span class="glyphicon glyphicon-star"></span>

                                            }
                                            @for (int i = System.Convert.ToInt32(a); i < 5; i++)
                                            {
                                                <span class="glyphicon glyphicon-star-empty"></span>
                                            }
                                        </li>
                                        <li>@count &nbsp;&nbsp;&nbsp;Reviews</li>

                                    </ul>

                                </div>

                            }

                        </div>
                        <div class="card-body">
                            <h5 class="card-title">RATINGS</h5>
                            <p class="card-text">
                                <ul style="list-style: none; padding-left:0;">
                                    <li>
                                        <i class="fa fa-utensils-alt"></i>&nbsp; Food
                                        @for (int i = System.Convert.ToInt32(c); i < 5; i++)
                                        {
                                            <span class="ratecircles glyphicon glyphicon-star-empty"></span>
                                        }
                                        @for (int i = 0; i < System.Convert.ToInt32(c); i++)
                                        {
                                            <span class="ratecircles glyphicon glyphicon-star "></span>

                                        }
                                    </li>
                                    <li>
                                        <i class="fa fa-concierge-bell"></i>&nbsp; Service
                                        @if (c == 5.0)
                                        {
                                            c = 4.0;
                                        }
                                        @for (int i = System.Convert.ToInt32(c + 1.0); i < 5; i++)
                                        {
                                            <span class="ratecircles glyphicon glyphicon-star-empty"></span>
                                        }
                                        @for (int i = 0; i < System.Convert.ToInt32(c + 1.0); i++)
                                        {
                                            <span class="ratecircles glyphicon glyphicon-star "></span>

                                        }

                                    </li>
                                    <li>
                                        <i class="fa fa-money-check-alt"></i>&nbsp; Value
                                        @if (c == 0.0)
                                        {
                                            c = 1.0;
                                        }
                                        @for (int i = System.Convert.ToInt32(c - 1.0); i < 5; i++)
                                        {
                                            <span class="ratecircles glyphicon glyphicon-star-empty"></span>
                                        }
                                        @for (int i = 0; i < System.Convert.ToInt32(c - 1.0); i++)
                                        {
                                            <span class="ratecircles glyphicon glyphicon-star "></span>

                                        }

                                    </li>
                                </ul>
                            </p>
                        </div>
                    }
                </div>
            </div>

            <br />

        </div>


    </div>


    <div class="menu row">

        <div class="col-8">
            <h2 style="margin-left:250px;">Our Menu</h2>
            <div class="container">
                <div class="row">
                    <div class="col-md-6">
                        <div class="tab" role="tabpanel">
                            <!-- Nav tabs -->
                            <ul class="nav nav-tabs" role="tablist">
                                <li role="presentation" class="active"><a href="#Section1" aria-controls="home" role="tab" data-toggle="tab">All</a></li>
                                <li role="presentation"><a href="#Section2" aria-controls="profile" role="tab" data-toggle="tab">Main</a></li>
                                <li role="presentation"><a href="#Section3" aria-controls="profile" role="tab" data-toggle="tab">Appetizers</a></li>
                                <li role="presentation"><a href="#Section4" aria-controls="messages" role="tab" data-toggle="tab">Sides</a></li>

                                <li role="presentation"><a href="#Section5" aria-controls="messages" role="tab" data-toggle="tab">Desserts</a></li>
                                <li role="presentation"><a href="#Section6" aria-controls="profile" role="tab" data-toggle="tab">Beverages</a></li>

                            </ul>
                            <!-- Tab panes -->
                            <div class="tab-content tabs">
                                <div role="tabpanel" class="tab-pane fade in active" id="Section1">


                                    @if (temp != null)
                                    {


                                        @foreach (var item in temp.First().Foods)
                                        {

                                            <div class="cards-wrapper ">


                                                <div class="card mcard mt-2">

                                                    <div class="card-body">
                                                        <div class="menu-image">
                                                            <img src="@Url.Content(item.ImagePath)" />
                                                        </div>
                                                        <div class="menu-det">
                                                            <div class="card-title"><h3>@item.FoodName</h3><h4> Price: Rs.@item.Price</h4> <a asp-action="addtocartgold" asp-controller="store_front" asp-route-id="@item.FoodId"><i class="fa fa-cart-plus" aria-hidden="true"></i> </a></div>

                                                            <div class="mcard-text">
                                                                INGREDIENTS: @item.Ingredient
                                                            </div>
                                                        </div>

                                                    </div>

                                                </div>

                                                @*<div class="card mcard mt-2">
                                                        @{ List<Menu> temp = Model.Menus.ToList();}
                                                        @if (temp != null)
                                                        {
                                                            @foreach (var item in temp.First().Foods)
                                                            {
                                                                <div class="card-body">
                                                                    <div class="menu-image">
                                                                    </div>
                                                                    <div class="menu-det">
                                                                        <div class="card-title"><h3>@item.FoodName </h3><h4> Price: Rs.400.00</h4></div>

                                                                        <p class="mcard-text">
                                                                            INGREDIENTS: Rolls, beef steak mince, olive oil, ketchup, egg, Dill pickle, Cheese, tomato, red onion
                                                                        </p>
                                                                    </div>

                                                                </div>
                                                            }
                                                        }
                                                    </div>*@


                                            </div>

                                        }

                                    }

                                </div>
                                <div role="tabpanel" class="tab-pane fade" id="Section2">


                                    @if (temp != null)
                                    {


                                        @foreach (var item in temp.First().Foods)
                                        {
                                            @if (item.Type == "Main")
                                            {
                                                <div class="cards-wrapper ">


                                                    <div class="card mcard mt-2">

                                                        <div class="card-body">
                                                            <div class="menu-image">
                                                                <img src="@Url.Content(item.ImagePath)" />
                                                            </div>
                                                            <div class="menu-det">
                                                                <div class="card-title"><h3>@item.FoodName</h3><h4> Price: Rs.@item.Price</h4></div>

                                                                <div class="mcard-text">
                                                                    INGREDIENTS: @item.Ingredient
                                                                </div>
                                                            </div>

                                                        </div>

                                                    </div>
                                                </div>

                                            }

                                        }
                                    }
                                </div>


                                <div role="tabpanel" class="tab-pane fade" id="Section3">
                                    @if (temp != null)
                                    {


                                        @foreach (var item in temp.First().Foods)
                                        {
                                            @if (item.Type == "Appetrizer")
                                            {
                                                <div class="cards-wrapper ">


                                                    <div class="card mcard mt-2">

                                                        <div class="card-body">
                                                            <div class="menu-image">
                                                                <img src="@Url.Content(item.ImagePath)" />
                                                            </div>
                                                            <div class="menu-det">
                                                                <div class="card-title"><h3>@item.FoodName</h3><h4> Price: Rs.@item.Price</h4></div>

                                                                <div class="mcard-text">
                                                                    INGREDIENTS: @item.Ingredient
                                                                </div>
                                                            </div>

                                                        </div>

                                                    </div>
                                                </div>

                                            }

                                        }
                                    }
                                </div>


                                <div role="tabpanel" class="tab-pane fade" id="Section4">
                                    @if (temp != null)
                                    {


                                        @foreach (var item in temp.First().Foods)
                                        {
                                            @if (item.Type == "Side")
                                            {
                                                <div class="cards-wrapper ">


                                                    <div class="card mcard mt-2">

                                                        <div class="card-body">
                                                            <div class="menu-image">
                                                                <img src="@Url.Content(item.ImagePath)" />
                                                            </div>
                                                            <div class="menu-det">
                                                                <div class="card-title"><h3>@item.FoodName</h3><h4> Price: Rs.@item.Price</h4></div>

                                                                <div class="mcard-text">
                                                                    INGREDIENTS: @item.Ingredient
                                                                </div>
                                                            </div>

                                                        </div>

                                                    </div>
                                                </div>

                                            }

                                        }
                                    }
                                </div>



                                <div role="tabpanel" class="tab-pane fade" id="Section5">
                                    @if (temp != null)
                                    {


                                        @foreach (var item in temp.First().Foods)
                                        {
                                            @if (item.Type == "Dessert")
                                            {
                                                <div class="cards-wrapper ">


                                                    <div class="card mcard mt-2">

                                                        <div class="card-body">
                                                            <div class="menu-image">
                                                                <img src="@Url.Content(item.ImagePath)" />
                                                            </div>
                                                            <div class="menu-det">
                                                                <div class="card-title"><h3>@item.FoodName</h3><h4> Price: Rs.@item.Price</h4></div>

                                                                <div class="mcard-text">
                                                                    INGREDIENTS: @item.Ingredient
                                                                </div>
                                                            </div>

                                                        </div>

                                                    </div>
                                                </div>

                                            }

                                        }
                                    }
                                </div>


                                <div role="tabpanel" class="tab-pane fade" id="Section6">
                                    @if (temp != null)
                                    {


                                        @foreach (var item in temp.First().Foods)
                                        {
                                            @if (item.Type == "Beverage")
                                            {
                                                <div class="cards-wrapper ">


                                                    <div class="card mcard mt-2">

                                                        <div class="card-body">
                                                            <div class="menu-image">
                                                                <img src="@Url.Content(item.ImagePath)" />
                                                            </div>
                                                            <div class="menu-det">
                                                                <div class="card-title"><h3>@item.FoodName</h3><h4> Price: Rs.@item.Price</h4></div>

                                                                <div class="mcard-text">
                                                                    INGREDIENTS: @item.Ingredient
                                                                </div>
                                                            </div>

                                                        </div>

                                                    </div>
                                                </div>

                                            }

                                        }
                                    }
                                </div>


                            </div>
                        </div>




                    </div>
                </div>
            </div>
        </div>
        <div class="col-4">
            <div class="rounded">
                <div class="bcard bg-light mb-3" style="max-width: 38rem;">

                    <div class="card-body">
                        <div class="rating-topic-det">Details</div>
                        <p class="card-text">
                            <ul style="list-style: none; padding-left:0;">
                                <li class="list_topic"><i class="fa fa-usd-square"></i>&nbsp; Price Range</li>
                                <li class="list_det">@Html.DisplayFor(model => model.PriceRange)</li>
                                <li class="list_topic"><i class="fa fa-hat-chef"></i>&nbsp; Cuisines</li>
                                <li class="list_det">@Html.DisplayFor(model => model.Cuisine)</li>
                                <li class="list_topic"><i class="fa fa-burger-soda"></i>&nbsp; Special Diets</li>
                                <li class="list_det">@Html.DisplayFor(model => model.SpecialDiet)</li>
                                @*<li class="list_topic"><i class="fa fa-info-square"></i>&nbsp; Our Mission</li>
                                    <li class="list_det">@Html.DisplayFor(model => model.Rabout)</li>*@
                            </ul>
                        </p>
                    </div>

                </div>
            </div>

            <div class="rounded" style="margin-top:140px;">
                <div class="lcard bg-light mb-3" style="max-width: 38rem;">
                    <div class="card-body">
                        <div class="rating-topic ">Location and Contact</div>
                        <div id="map-container-google-1" class="z-depth-1-half map-container" style="height: 200px">
                            <iframe src="@Html.DisplayFor(model => model.MapLink)" frameborder="0"
                                    style="border:0" allowfullscreen></iframe>
                        </div>

                        <p class="card-text">
                            <ul style="list-style: none; padding-left:0;">
                                <li><i class="fa fa-location"></i>&nbsp;@Html.DisplayFor(model => model.Raddress) </li>
                                <li><i class="fa fa-phone-square-alt"></i>&nbsp;@Html.DisplayFor(model => model.OwnerContact)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i class="fa fa-external-link-alt"></i><a href="@Html.DisplayFor(model => model.WebsiteLink)"> website</a></li>

                            </ul>
                        </p>
                    </div>

                </div>
            </div>
        </div>

    </div>
    <div class="rev row">

        @if (temp2 != null)
        {
            var k = 0;

            foreach (var item in temp2.First().Reviews)
            {
                k++;
            }
            if (k != 0)
            {
                <div class="col-8" id="#rev">
                    <div class="rev-topic">
                        @if (temp2 != null)
                        {
                            var i = 0;

                            foreach (var item in temp2.First().Reviews)
                            {
                                i++;
                            }

                            <h3>Reviews (@i)</h3>@*<button class="revb">Write a Review</button>*@
                            //sessionid= 1; // for the form to be displayed. remove this to see the error message.

                            @if ((sessionid != null) && (sessionid != -1))
                            {
                                <div align="center">
                                    <br />
                                    <a href="#loginScreen" class="revb">Write a Review</a>
                                </div>

                                <div id="loginScreen">
                                    <a href="#rev" class="cancel">×</a>
                                    <div id="contact-form">
                                        <div>
                                            <h1>WE APPRECIATE YOUR REVIEW!</h1>

                                        </div>


                                        <form method="post" enctype="multipart/form-data" asp-controller="store_front" asp-action="create_review" runat="server">

                                            <div>
                                                <label for="topic">
                                                    <span class="required">Your Overall Experience: *</span>
                                                    <input type="text" id="experience" name="experience" value="" placeholder="Fantastic!" tabindex="2" required="required" />
                                                </label>
                                            </div>
                                            <div>
                                                <label for="subject">
                                                    <span class="required">Rate our Overall Service: </span>
                                                    <select id="subject" name="subject" tabindex="4">
                                                        <option value="1">1</option>
                                                        <option value="2">2 </option>
                                                        <option value="3">3</option>
                                                        <option value="4">4</option>
                                                        <option value="5">5</option>

                                                    </select>
                                                </label>
                                            </div>
                                            <div>
                                                <label for="message">
                                                    <span class="required">Write Your Feedback: *</span>
                                                    <input type="text" id="message" name="message" placeholder="Please write your feedback here." tabindex="5" required="required"></input="Cemail">
                                                </label>
                                            </div>
                                            <div>
                                                <label for="photos">
                                                    @*image upload*@
                                                    <input type="file" id="fileupload" name="postedFiles" accept=".bmp, .jpg, .png, .gif, .jpeg, .BMP, .JPG, .PNG, .GIF, .JPEG" multiple />


                                                </label>
                                            </div>
                                            <button name="submit" type="submit" id="submit" onclick="return Validateimages()">Submit</button>

                                        </form>

                                    </div>



                                </div>
                                <div id="cover">
                                </div>
                            }
                            //restaurants cannot write reviews
                            @*else if (sessionuser == "REST")
                {
            <div id="loginScreen">
                <a href="#rev" class="cancel">×</a>
                <p>u can't'</p>
            </div>
                }*@


                            else
                            {
                                <div align="center">
                                    <br />
                                    <a href="#eloginScreen" class="revb">Write a Review</a>
                                </div>
                                <div id="eloginScreen">
                                    <a href="#rev" class="ecancel">×</a>
                                    <div class="page-wrapper">
                                        <div class="custom-modal">
                                            <div class="danger danger-animation icon-top"><i class="fa fa-times"></i></div>
                                            <div class="danger border-bottom"></div>
                                            <div class="content">
                                                <p class="type">Warning!</p>
                                                <p class="message-type">You must be logged in first to write a review! </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>



                                <div id="ecover">
                                </div>
                            }

                        }

                    </div>
                    <div id="carouselcardrev" class="carousel slide " data-interval="false">
                        <div class="carousel-inner">

                            <div class="swiper-container favSwiper2">
                                <div class="swiper-wrapper">
                                    @if (temp2 != null)
                                    {
                                        var i = 0;

                                        foreach (var item in temp2.First().Reviews)
                                        {
                                            i++;

                                            <div class="swiper-slide">
                                                @*<div class="swiper-block">*@
                                                <div class="cards-wrapper">
                                                    <div class="card rcard mt-2">
                                                        <div class="card-body">
                                                            <div class="menu-image">
                                                                <img src="@Url.Content(item.Customer.ProfileImage)" />
                                                                <div class="rev-name">@item.Customer.Name</div>
                                                            </div>
                                                            <div class="menu-det">
                                                                <div class="card-title">

                                                                    @{
                                                                        var a = @item.Rating;

                                                                        <div class="circles">

                                                                            <ul style="list-style:none">

                                                                                <li>
                                                                                    @for (int j = 0; j < System.Convert.ToInt32(a); j++)
                                                                                    {
                                                                                        <span class="glyphicon glyphicon-star"></span>

                                                                                    }
                                                                                    @for (int j = System.Convert.ToInt32(a); j < 5; j++)
                                                                                    {
                                                                                        <span class="glyphicon glyphicon-star-empty"></span>
                                                                                    }
                                                                                </li>


                                                                            </ul>

                                                                        </div>

                                                                    }


                                                                    <div class="revdate">&nbsp;Reviewed in @item.Date.ToString("dd/MM/yyyy") </div><p class="revnum">@i</p>
                                                                </div>
                                                                <h5>"@item.Title"</h5>
                                                                <p class="rcard-text">
                                                                    @item.Feedback
                                                                </p>


                                                                <div class="rev-img">
                                                                    @if (@item.ReviewImage1 != null)
                                                                    {
                                                                        <img src="@Url.Content(item.ReviewImage1)" />
                                                                    }
                                                                    @if (@item.ReviewImage2 != null)
                                                                    {
                                                                        <img src="@Url.Content(item.ReviewImage2)" />
                                                                    }
                                                                    @if (@item.ReviewImage3 != null)
                                                                    {
                                                                        <img src="@Url.Content(item.ReviewImage3)" />
                                                                    }

                                                                </div>


                                                            </div>

                                                        </div>
                                                    </div>

                                                </div>
                                            </div>

                                        }
                                    }

                                </div>
                                <div class="swiper-pagination"></div>
                            </div>

                        </div>

                    </div>
                </div>
            }
            else
            {
                <h3>Reviews (0)</h3>@*<button class="revb">Write a Review</button>*@
                //sessionid= 1; // for the form to be displayed. remove this to see the error message.


                @if (sessionid != null)
                {
                    <div align="center">
                        <br />
                        <a href="#loginScreen" class="revb">Write a Review</a>
                    </div>

                    <div id="loginScreen">
                        <a href="#rev" class="cancel">×</a>
                        <div id="contact-form">
                            <div>
                                <h1>WE APPRECIATE YOUR REVIEW!</h1>

                            </div>


                            <form method="post" enctype="multipart/form-data" asp-controller="store_front" asp-action="create_review" runat="server">

                                <div>
                                    <label for="topic">
                                        <span class="required">Your Overall Experience: *</span>
                                        <input type="text" id="experience" name="experience" value="" placeholder="Fantastic!" tabindex="2" required="required" />
                                    </label>
                                </div>
                                <div>
                                    <label for="subject">
                                        <span class="required">Rate our Overall Service: </span>
                                        <select id="subject" name="subject" tabindex="4">
                                            <option value="1">1</option>
                                            <option value="2">2 </option>
                                            <option value="3">3</option>
                                            <option value="4">4</option>
                                            <option value="5">5</option>

                                        </select>
                                    </label>
                                </div>
                                <div>
                                    <label for="message">
                                        <span class="required">Write Your Feedback: *</span>
                                        <input type="text" id="message" name="message" placeholder="Please write your feedback here." tabindex="5" required="required"></input="Cemail">
                                    </label>
                                </div>
                                <div>
                                    <label for="photos">
                                        @*image upload*@
                                        <input type="file" id="fileupload" name="postedFiles" accept=".bmp, .jpg, .png, .gif, .jpeg, .BMP, .JPG, .PNG, .GIF, .JPEG" multiple />


                                    </label>
                                </div>
                                <button name="submit" type="submit" id="submit" onclick="return Validateimages()">Submit</button>

                            </form>

                        </div>



                    </div>
                    <div id="cover">
                    </div>
                }
                //restaurants cannot write reviews
                @*else if (sessionuser == "REST")
                        {
                    <div id="loginScreen">
                        <a href="#rev" class="cancel">×</a>
                        <p>u can't'</p>
                    </div>
                        }*@


                else
                {
                    <div align="center">
                        <br />
                        <a href="#eloginScreen" class="revb">Write a Review</a>
                    </div>
                    <div id="eloginScreen">
                        <a href="#rev" class="ecancel">×</a>
                        <div class="page-wrapper">
                            <div class="custom-modal">
                                <div class="danger danger-animation icon-top"><i class="fa fa-times"></i></div>
                                <div class="danger border-bottom"></div>
                                <div class="content">
                                    <p class="type">Warning!</p>
                                    <p class="message-type">You must be logged in first to write a review! </p>
                                </div>
                            </div>
                        </div>
                    </div>



                    <div id="ecover">
                    </div>
                }
            }
        }

    <div class="likerow row ">

        <h3 class="like">People also like</h3>
        <main class="grid">
            @if (temp3 != null)
            {


                foreach (var item in temp3)
                {


                    <article>
                        @if (temp9 != null)
                        {
                            foreach (var element in temp9)
                            {
                                <img src="@Url.Content(element.MainImagePath)" alt="Sample photo">
                            }
                        }
                        <div class="text">

                            <h4>@item.Rname</h4>
                            <p>
                                <div class="circles" style="font-size:13px;">





                                    @if (temp3 != null)
                                    {
                                        double sum = 0.0;
                                        double avg = 0.0;
                                        int count = 0;
                                        @foreach (var item2 in temp3.First().Reviews)
                                        {

                                            var rate = @item2.Rating;
                                            sum = sum + System.Convert.ToDouble(rate);
                                            count++;


                                        }
                                        if (count > 0)
                                        {
                                            avg = (sum / count);
                                        }
                                        else
                                        {
                                            count = 1;
                                            avg = (sum / count);
                                            count = 0;
                                        }
                                        float a = System.Convert.ToSingle(avg);
                                        String val = a.ToString("0.0");
                                        float minus = System.Convert.ToSingle(1);
                                        c = avg - 1.0;
                                        <div class="circles">

                                            <ul style="list-style:none">

                                                <li>
                                                    @for (int i = 0; i < System.Convert.ToInt32(a); i++)
                                                    {
                                                        <span class="glyphicon glyphicon-star"></span>

                                                    }
                                                    @for (int i = System.Convert.ToInt32(a); i < 5; i++)
                                                    {
                                                        <span class="glyphicon glyphicon-star-empty"></span>
                                                    }
                                                    &nbsp; &nbsp;@count&nbsp; Reviews
                                                </li>

                                            </ul>

                                        </div>

                                    }


                                </div>
                            </p>
                            <p class="cusineitem">@item.Cuisine</p>
                        </div>
                    </article>
                }
            }
            @if (temp4 != null)
            {


                foreach (var item in temp4)
                {
                    <article>
                        @if (temp10 != null)
                        {
                            foreach (var element in temp10)
                            {
                                <img src="@Url.Content(element.MainImagePath)" alt="Sample photo">
                            }
                        }
                        <div class="text">

                            <h4>@item.Rname</h4>
                            <p>
                                <div class="circles" style="font-size:13px;">


                                    @if (temp4 != null)
                                    {
                                        double sum = 0.0;
                                        double avg = 0.0;
                                        int count = 0;
                                        @foreach (var item2 in temp4.First().Reviews)
                                        {

                                            var rate = @item2.Rating;
                                            sum = sum + System.Convert.ToDouble(rate);
                                            count++;


                                        }
                                        if (count > 0)
                                        {
                                            avg = (sum / count);
                                        }
                                        else
                                        {
                                            count = 1;
                                            avg = (sum / count);
                                            count = 0;
                                        }
                                        float a = System.Convert.ToSingle(avg);
                                        String val = a.ToString("0.0");
                                        float minus = System.Convert.ToSingle(1);
                                        c = avg - 1.0;
                                        <div class="circles">

                                            <ul style="list-style:none">

                                                <li>
                                                    @for (int i = 0; i < System.Convert.ToInt32(a); i++)
                                                    {
                                                        <span class="glyphicon glyphicon-star"></span>

                                                    }
                                                    @for (int i = System.Convert.ToInt32(a); i < 5; i++)
                                                    {
                                                        <span class="glyphicon glyphicon-star-empty"></span>
                                                    }
                                                    &nbsp;&nbsp; @count&nbsp; Reviews
                                                </li>


                                            </ul>

                                        </div>

                                    }

                                </div>
                            </p>
                            <p class="cusineitem">@item.Cuisine</p>
                        </div>
                    </article>
                }
            }
            @if (temp5 != null)
            {


                foreach (var item in temp5)
                {
                    <article>
                        @if (temp11 != null)
                        {
                            foreach (var element in temp11)
                            {
                                <img src="@Url.Content(element.MainImagePath)" alt="Sample photo">
                            }
                        }
                        <div class="text">

                            <h4>@item.Rname</h4>
                            <p>
                                <div class="circles" style="font-size:13px;">
                                    @if (temp5 != null)
                                    {
                                        double sum = 0.0;
                                        double avg = 0.0;
                                        int count = 0;
                                        @foreach (var item2 in temp5.First().Reviews)
                                        {

                                            var rate = @item2.Rating;
                                            sum = sum + System.Convert.ToDouble(rate);
                                            count++;


                                        }
                                        if (count > 0)
                                        {
                                            avg = (sum / count);
                                        }
                                        else
                                        {
                                            count = 1;
                                            avg = (sum / count);
                                            count = 0;
                                        }

                                        float a = System.Convert.ToSingle(avg);
                                        String val = a.ToString("0.0");
                                        float minus = System.Convert.ToSingle(1);
                                        c = avg - 1.0;
                                        <div class="circles">

                                            <ul style="list-style:none">

                                                <li>
                                                    @for (int i = 0; i < System.Convert.ToInt32(a); i++)
                                                    {
                                                        <span class="glyphicon glyphicon-star"></span>

                                                    }
                                                    @for (int i = System.Convert.ToInt32(a); i < 5; i++)
                                                    {
                                                        <span class="glyphicon glyphicon-star-empty"></span>
                                                    }
                                                    &nbsp;&nbsp; @count&nbsp; Reviews
                                                </li>


                                            </ul>

                                        </div>

                                    }
                                </div>
                            </p>
                            <p class="cusineitem">@item.Cuisine</p>
                        </div>
                    </article>
                }
            }
            @if (temp6 != null)
            {


                foreach (var item in temp6)
                {
                    <article>
                        @if (temp12 != null)
                        {
                            foreach (var element in temp12)
                            {
                                <img src="@Url.Content(element.MainImagePath)" alt="Sample photo">
                            }
                        }
                        <div class="text">

                            <h4>@item.Rname</h4>
                            <p>
                                <div class="circles" style="font-size:13px;">
                                    @if (temp6 != null)
                                    {
                                        double sum = 0.0;
                                        double avg = 0.0;
                                        int count = 0;
                                        @foreach (var item2 in temp6.First().Reviews)
                                        {

                                            var rate = @item2.Rating;
                                            sum = sum + System.Convert.ToDouble(rate);
                                            count++;


                                        }
                                        if (count > 0)
                                        {
                                            avg = (sum / count);
                                        }
                                        else
                                        {
                                            count = 1;
                                            avg = (sum / count);
                                            count = 0;
                                        }
                                        float a = System.Convert.ToSingle(avg);
                                        String val = a.ToString("0.0");
                                        float minus = System.Convert.ToSingle(1);
                                        c = avg - 1.0;
                                        <div class="circles">

                                            <ul style="list-style:none">

                                                <li>
                                                    @for (int i = 0; i < System.Convert.ToInt32(a); i++)
                                                    {
                                                        <span class="glyphicon glyphicon-star"></span>

                                                    }
                                                    @for (int i = System.Convert.ToInt32(a); i < 5; i++)
                                                    {
                                                        <span class="glyphicon glyphicon-star-empty"></span>

                                                    }
                                                    &nbsp; &nbsp;@count&nbsp; Reviews
                                                </li>


                                            </ul>

                                        </div>

                                    }
                                </div>
                            </p>
                            <p class="cusineitem">@item.Cuisine</p>
                        </div>
                    </article>
                }
            }



        </main>
    </div>



    </div>

</div>

<script>
    var swiper = new Swiper(".favSwiper", {
        slidesPerView: 3,
        spaceBetween: 3,
        freeMode: true,
        loop: true,
        autoplay: {
            delay: 5000,
            disableOnInteraction: false,
            pauseOnMouseEnter: true,
        },
        pagination: {
            el: ".swiper-pagination",
            clickable: true,
        }, navigation: {
            nextEl: ".swiper-button-next",
            prevEl: ".swiper-button-prev",
        },
    });


    var swiper = new Swiper(".favSwiper2", {
        slidesPerView: 2,
        spaceBetween: 10,
        freeMode: true,
        loop: false,
        autoplay: {
            delay: 5000,
            disableOnInteraction: false,
            pauseOnMouseEnter: true,
        },
        pagination: {
            el: ".swiper-pagination",
            clickable: true,
        }, navigation: {
            nextEl: ".swiper-button-next",
            prevEl: ".swiper-button-prev",
        },
    });




    function Validateimages() {
        var fileCount = document.getElementById('fileupload').files.length;
        if (fileCount > 3) // Selected images with in 10 count
        {
            alert("Please select only 3 images..!!!");
            return false;
        }
        else if (fileCount <= 0) // Selected atleast 1 image check
        {
            alert("Please select atleat 1 image..!!!");
            return false;
        }
        else {
            return true;
        }

    }
</script>

